<!DOCTYPE html>
<head profile="http://gmpg.org/xfn/11">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery Media Query sync</title>
	<link rel="stylesheet" href="media-queries.css" type="text/css" media="screen" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="jquery.mq-sync.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			$('html').mqSync({
				//queriedElement: $('body'), // Override the queried element
			});

			$('#check-media-query').click(function () {
				$('#result').text($('html').mqSync.getMediaQuery());

				// Test against the mqSync plugin
				if ($('html').mqSync.matches('mq-min-large')) {
					$('#result').append('<br /> Matches large');
				}

				// Test against the data value
				if ($('body').data('media-query') == 'mq-min-medium') {
					$('#result').append('<br /> Matches medium')
				}
			});

			// This event fires when the media query changes
			$('html').on('mediaQueryChange', function (event, newMediaQuery, oldMediaQuery) {
				// Update the result label to show the new media query
				$('#result').text(newMediaQuery);
			});

			// Run through each responsive image and see if an image exists at that media query
			function updateResponsiveImages(newMediaQuery) {
				$('img.responsive').each(function () {
					var $img = $(this),
						currentSource = $img.data(newMediaQuery + '-src');

					// There is an image supplied for this media query
					if (currentSource) {
						$img.attr('src', currentSource);
					}
				});
			};

			// Update the current responsive image size
			updateResponsiveImages($('html').mqSync.getMediaQuery());

			// Update responsive images on media query change
			$('html').on('mediaQueryChange', function (event, newMediaQuery, oldMediaQuery) {
				updateResponsiveImages(newMediaQuery);
			});
		});
	</script>
</head>
<body>

	<div>
		<div id="result">
			Click the button or resize to see the current media query
		</div>

		<button id="check-media-query">Check Media Query</button>
	</div>


	<img class="responsive" src="images/400x320.jpg" data-mq-small-src="images/400x320.jpg" data-mq-medium-src="images/800x640.jpg" data-mq-large-src="images/1000x800.jpg" alt="Responsive image" />

</body>
</html>